$(document).ready(function(){var t=$(".js-sale-popup-container.hidden");t.length&&setTimeout(function(){t.removeClass("hidden");var e=t.data("include");fetch(e,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(function(t){if(!t.ok)throw new Error("Network response was not ok");return t.json()}).then(function(e){var a=e.data;t.html(a),void 0!==Theme.lazyLoadInstance&&Theme.lazyLoadInstance.update(),function(t){if(!0===$(".js-sale-popup-container").data("show-on-mobile")||!($(window).width()<768)){var e=t.data("stt");if(void 0!==e){var a,o,n=e.limit-1,s=e.pp_type,i=JSON.parse($("#title-sale-popup").html()),p=e.url,r=e.image,l=e.id,u=JSON.parse($("#location-sale-popup").html()),c=JSON.parse($("#time-sale-popup").html()),d=e.classUp,m=e.classDown[d],h=$(".js-sale-popup-img"),f=$(".js-sale-popup-a"),v=$(".js-sale-popup-tt"),T=$(".js-sale-popup-location"),w=$(".js-sale-popup-ago"),j=$(".sale-popup-quick-view"),g=0,y=p.length-1,C=u.length-1,k=c.length-1,x=e.starTime*e.starTimeUnit,N=e.stayTime*e.stayTimeUnit,J=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},O=function(t){var e=r[t];h.attr("src",e).attr("srcset",e),v.text(i[t]),f.attr("href",p[t]);var a=j.attr("data-base-url")+"/ajax/quick-view/"+l[t];j.attr("href",a).attr("data-url",a),T.text(u[J(0,C)]),w.text(c[J(0,k)]),b()},S=function(){"1"==s?(O(g),(++g>n||g>y)&&(g=0)):O(J(0,y)),o=setTimeout(function(){U()},N)},U=function(){q(),a=setTimeout(function(){S()},x)},b=function(){t.removeClass("hidden").addClass(d).removeClass(m)},q=function(){t.removeClass(d).addClass(m)};$(document).on("click",".sale-popup-close",function(t){t.preventDefault(),q(),clearTimeout(o),clearTimeout(a)}),t.on("open-sale-popup",function(){U()}),U()}}}(t.find(".sale-popup-container-wrap"))}).catch(function(t){console.error("Fetch error:",t)})},3e3)});